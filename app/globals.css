@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

html, body {
  margin: 0;
  padding: 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
html::-webkit-scrollbar,
body::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  font-smooth: always;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
*::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}
*::-webkit-scrollbar-track,
*::-webkit-scrollbar-thumb {
  display: none;
  background: transparent;
}

/* ซ่อน scrollbar ของ feed หลักเมื่อเปิด viewing mode (body + html เผื่อ browser ใช้ html เป็น scroll) */
body[data-viewing-mode="open"]::-webkit-scrollbar,
html:has(body[data-viewing-mode="open"])::-webkit-scrollbar {
  display: none !important;
}
body[data-viewing-mode="open"],
html:has(body[data-viewing-mode="open"]) {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

/* ซ่อน scrollbar ใน viewing mode container (ตัวที่ scroll จริง) */
#viewing-mode-container {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}
#viewing-mode-container::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}
#viewing-mode-container::-webkit-scrollbar-track,
#viewing-mode-container::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
}

/* ซ่อน scrollbar หน้าโฮม (รวม iOS) – ใส่ทั้ง html และ body เผื่อ browser ใช้ html เป็น scroll container */
html:has(body[data-page="home"]) {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}
body[data-page="home"] {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}
body[data-page="home"]::-webkit-scrollbar,
html:has(body[data-page="home"])::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent !important;
}
body[data-page="home"]::-webkit-scrollbar-track,
body[data-page="home"]::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
}

/* เลื่อนฟีดลื่น ไม่กระตุก: momentum บน iOS + ลด paint การ์ดนอกจอ */
body[data-page="home"],
html:has(body[data-page="home"]) {
  -webkit-overflow-scrolling: touch;
}

/* การ์ดโพสต์: ข้าม paint เมื่ออยู่นอกจอ ลด jank ตอน scroll */
.feed-card {
  content-visibility: auto;
  -webkit-contain-intrinsic-size: auto 480px;
  contain-intrinsic-size: auto 480px;
}

/* Loading Spinner Animation */
@keyframes fadeColor {
  0%, 100% { background: #f0f0f0; }
  12.5% { background: #1a1a1a; }
  25% { background: #4a4a4a; }
  37.5% { background: #6a6a6a; }
  50% { background: #8a8a8a; }
  62.5% { background: #b0b0b0; }
  75% { background: #d0d0d0; }
  87.5% { background: #e5e5e5; }
}

/* วงหมุน: ใช้ translate3d ใน keyframe เพื่อให้หมุนครบรอบบน compositor ไม่สะดุด */
@keyframes spinner-ring-spin {
  0%   { transform: translate3d(0, 0, 0) rotate(0deg); }
  100% { transform: translate3d(0, 0, 0) rotate(360deg); }
}

/* ช่อง spinner ด้านล่าง feed: แยก layer ไม่ให้การอัปเดตโพสต์มาทำให้ spinner กระพริบ/หมุนไม่เต็ม */
.feed-bottom-slot {
  contain: layout style paint;
  transform: translateZ(0);
}

.spinner-ring {
  display: inline-block;
  width: 40px;
  height: 40px;
  min-width: 40px;
  min-height: 40px;
  flex-shrink: 0;
  border: 3px solid #e5e5e5;
  border-top-color: #333333;
  border-radius: 50%;
  animation: spinner-ring-spin 1.15s linear infinite;
  will-change: transform;
  backface-visibility: hidden;
  transform: translate3d(0, 0, 0);
  contain: layout style paint;
}

.spinner-ring-sm {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid #e5e5e5;
  border-top-color: currentColor;
  border-radius: 50%;
  animation: spinner-ring-spin 1.15s linear infinite;
  will-change: transform;
  backface-visibility: hidden;
  transform: translate3d(0, 0, 0);
  contain: layout style paint;
}

/* เลิกใช้แล้ว (เก็บไว้เผื่ออ้างอิง) */
.loading-spinner-circle {
  display: inline-block;
  width: 40px;
  height: 40px;
  position: relative;
}

.loading-spinner-circle div {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  top: 0;
  left: 50%;
  margin-left: -4px;
  transform-origin: 4px 20px;
  background: #f0f0f0;
  animation: fadeColor 1s linear infinite;
}

.loading-spinner-circle div:nth-child(1) { transform: rotate(0deg); animation-delay: 0s; }
.loading-spinner-circle div:nth-child(2) { transform: rotate(45deg); animation-delay: 0.125s; }
.loading-spinner-circle div:nth-child(3) { transform: rotate(90deg); animation-delay: 0.25s; }
.loading-spinner-circle div:nth-child(4) { transform: rotate(135deg); animation-delay: 0.375s; }
.loading-spinner-circle div:nth-child(5) { transform: rotate(180deg); animation-delay: 0.5s; }
.loading-spinner-circle div:nth-child(6) { transform: rotate(225deg); animation-delay: 0.625s; }
.loading-spinner-circle div:nth-child(7) { transform: rotate(270deg); animation-delay: 0.75s; }
.loading-spinner-circle div:nth-child(8) { transform: rotate(315deg); animation-delay: 0.875s; }

/* Small spinner (buttons/tabs) - same animation as notification page */
.loading-spinner-circle-btn,
.app-header-tab-spinner,
.tab-nav-loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  position: relative;
}

.loading-spinner-circle-btn div,
.app-header-tab-spinner div,
.tab-nav-loading-spinner div {
  opacity: 0.2;
}

@keyframes spinnerDotOpacity {
  0%, 100% { opacity: 0.2; }
  50% { opacity: 1; }
}

.loading-spinner-circle-btn div,
.app-header-tab-spinner div,
.tab-nav-loading-spinner div {
  position: absolute;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  top: 0;
  left: 50%;
  margin-left: -2px;
  transform-origin: 2px 10px;
  background: currentColor;
  animation: spinnerDotOpacity 1s linear infinite;
}

.loading-spinner-circle-btn div:nth-child(1),
.app-header-tab-spinner div:nth-child(1),
.tab-nav-loading-spinner div:nth-child(1) { transform: rotate(0deg); animation-delay: 0s; }
.loading-spinner-circle-btn div:nth-child(2),
.app-header-tab-spinner div:nth-child(2),
.tab-nav-loading-spinner div:nth-child(2) { transform: rotate(45deg); animation-delay: 0.125s; }
.loading-spinner-circle-btn div:nth-child(3),
.app-header-tab-spinner div:nth-child(3),
.tab-nav-loading-spinner div:nth-child(3) { transform: rotate(90deg); animation-delay: 0.25s; }
.loading-spinner-circle-btn div:nth-child(4),
.app-header-tab-spinner div:nth-child(4),
.tab-nav-loading-spinner div:nth-child(4) { transform: rotate(135deg); animation-delay: 0.375s; }
.loading-spinner-circle-btn div:nth-child(5),
.app-header-tab-spinner div:nth-child(5),
.tab-nav-loading-spinner div:nth-child(5) { transform: rotate(180deg); animation-delay: 0.5s; }
.loading-spinner-circle-btn div:nth-child(6),
.app-header-tab-spinner div:nth-child(6),
.tab-nav-loading-spinner div:nth-child(6) { transform: rotate(225deg); animation-delay: 0.625s; }
.loading-spinner-circle-btn div:nth-child(7),
.app-header-tab-spinner div:nth-child(7),
.tab-nav-loading-spinner div:nth-child(7) { transform: rotate(270deg); animation-delay: 0.75s; }
.loading-spinner-circle-btn div:nth-child(8),
.app-header-tab-spinner div:nth-child(8),
.tab-nav-loading-spinner div:nth-child(8) { transform: rotate(315deg); animation-delay: 0.875s; }

/* กำหนดสีตัวอักษรชัดเจน (ไม่ใช้ default ของ browser) โดยเฉพาะ Android */
input,
textarea {
  color: #111111;
}
input::placeholder,
textarea::placeholder {
  color: #555555;
}
